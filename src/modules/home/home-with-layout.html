<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/app-route/app-route.html">
<link rel="import" href="../../configs/behaviors/module-behavior.html">
<link rel="import" href="../layout/main-layout.html">

<dom-module id="home-with-layout">
  <template>

    <style>

    </style>

    <!-- Route manipulation here -->
    <app-route
      route="{{moduleRoute}}"
      pattern="/:page"
      data="{{moduleData}}"
      tail="{{subroute}}">
    </app-route>
    <!-- Route manipulation ends here -->

    <!-- Put template here -->
    <main-layout
      module-route="{{moduleRoute}}"
      module-name="[[moduleName]]"
      page="[[page]]"
      app-title="System"
      menu="[[menu]]"
      user="{{user}}"
      >
      <home-root name="root" user="{{user}}" page-route="[[subroute]]"></home-root>
      <home-phase1 name="phase1" user="{{user}}" page-route="[[subroute]]"></home-phase1>
      <home-done name="done" user="{{user}}" page-route="[[subroute]]"></home-done>
    </main-layout>
    <!-- Put template ends here -->

  </template>
  <script>
    Polymer({

      // name of the component
      is: 'home-with-layout',

      properties: {
        menu: {
          type: Array,
          value: [
            {
              label: 'Home',
              name: 'root',
              href: '/',
              auth: false
            },
            {
              label: 'Korero',
              name: 'korero',
              href: '/korero',
              auth: false
            }
          ]
        },
        user: {
          type: Object
        },
        // subroute: {
        //   type: Object,
        //   // reflectToAttribute: true
        // },
        // subsubroute: {
        //   type: Object
        // }
      },

      observers: [
        'check(subroute)'
      ],

      check: function(e) {
        console.log(e)
        // this.set('subsubroute', e.value);
      },

      // behaviors
      behaviors: [
        Polymer.ModuleBehavior
      ]

    });
  </script>
</dom-module>